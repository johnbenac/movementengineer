(function () {
  'use strict';

  const dataset = {
    version: '3.5',
    texts: [
      {
        id: 'txt-reknit-canon-taxonomy',
        movementId: 'mov-reknit-december-15',
        parentId: null,
        level: 'work',
        title: 'Reknit Canon Taxonomy',
        label: 'Canon Taxonomy',
        mainFunction: 'commentary',
        tags: [
          'doc:reference',
          'layer:meta',
          'truthmode:meta',
          'audience:steward'
        ],
        mentionsEntityIds: [],
        content: [
          '## Reknit Canon Taxonomy',
          '### Document Kinds, Layers, Truth Modes, and Safety Tagging',
          '',
          '**Status:** Canonical conventions (v0)',
          '**Intent:** This is not doctrine; it is the “grammar” of Reknit’s canon so the rest of the canon stays legible, forkable, and resistant to drift.',
          '',
          '### Why this exists',
          '',
          'Before we publish a charter, a mythology, an archetype like “The Drummer,” or a podcast script that cues `[drum.wav]`, we need a shared taxonomy of speech:',
          '- What kind of document is this?',
          '- How should it be interpreted?',
          '- Who is it written for?',
          '- Is it a power surface that requires explicit safeguards and risk trailheads?',
          '',
          'This prevents a common failure mode of high-cohesion projects: people treat everything as equally literal, equally authoritative, and equally binding. Reknit refuses that confusion.',
          '',
          '---',
          '',
          '## 1) Terms and primitives',
          '',
          '### Canon document',
          'In Reknit, a “document” is primarily a `texts[]` node (organized into `textCollections[]` later). Other model objects (`claims`, `rules`, `practices`, `events`) are canonical too, but they function like index cards / executable hooks that should cite texts.',
          '',
          '### Work and passage',
          '- A **work** (`texts[].level === "work"`) is a “book” or “primary document.”',
          '- A **passage** (`level === "passage"`) is a section within a work.',
          '- Convention: tags live on works; passages inherit unless they differ.',
          '',
          '### Derived artifacts',
          'Some outputs are delivery artifacts (audio files, PDFs, posters). In the model:',
          '- Scripts are `texts[]`.',
          '- Files are `media[]`.',
          '- Scripts should link to the underlying canon texts they deliver.',
          '',
          '---',
          '',
          '## 2) The tagging contract (minimal, not bureaucratic)',
          '',
          '### Required (for every root work)',
          'Every root work text MUST have exactly one `doc:*` tag.',
          '',
          '### Strongly recommended (for root works)',
          'Every root work text SHOULD also have:',
          '- one `layer:*` tag',
          '- one `truthmode:*` tag',
          '- one `audience:*` tag',
          '',
          '### Optional (only when relevant)',
          'Add these when applicable:',
          '- `power_surface`',
          '- `hazard:*` tags (money/authority/privacy/etc.)',
          '- script/media refinement tags (for performance artifacts)',
          '',
          '### Inheritance rule',
          'Passages usually do not repeat `doc:*`, `layer:*`, `truthmode:*`, `audience:*`. They inherit from the work unless a passage changes mode.',
          '',
          '---',
          '',
          '## 3) The four canon layers',
          '',
          'Use one of:',
          '- `layer:why` — purpose, diagnosis, threat model, scope',
          '- `layer:how` — safeguards, governance constraints, practices, rituals',
          '- `layer:what` — stories, archetypes, teachings, lexicon content-world',
          '- `layer:delivery` — scripts and packaging intended to be consumed/performed',
          '',
          'Reserved (only for system/conventions documents like this one):',
          '- `layer:meta` — how the canon is structured; maintainer conventions',
          '',
          '---',
          '',
          '## 4) Truth modes (how to interpret a document)',
          '',
          'Use one of:',
          '- `truthmode:policy` — constraints, safeguards, governance rules (normative)',
          '- `truthmode:analysis` — diagnosis, threat models, incentives (descriptive)',
          '- `truthmode:teaching` — interpretation meant to guide understanding',
          '- `truthmode:metaphor` — myths and archetypal narrative (symbolic, not literal)',
          '- `truthmode:instruction` — step-by-step how-to',
          '- `truthmode:ritual` — repeatable participatory scripts',
          '- `truthmode:performance` — scripts meant to be performed/recorded',
          '- `truthmode:reference` — definitions, indexes, glossary',
          '- `truthmode:meta` — canon about canon; system/conventions',
          '',
          'Interpretation guardrail:',
          'If a text is `truthmode:metaphor`, it must not be used as a loyalty test, a justification for coercion, a license to scapegoat real people/groups, or a mechanism to override consent. If it does, it is being misused—by definition.',
          '',
          '---',
          '',
          '## 5) The core document kinds (`doc:*`)',
          '',
          'Every root work gets exactly one:',
          '',
          '- `doc:charter` — Purpose + non-negotiables + scope boundaries',
          '- `doc:analysis` — Threat models, diagnosis, design rationale',
          '- `doc:stewardship` — Governance constraints, safety systems, incident handling',
          '- `doc:lexicon` — Definitions and stable referents (terms/roles/archetypes/demonyms)',
          '- `doc:myth` — Narrative canon (stories/parables)',
          '- `doc:teaching` — Interpretation bridging myth → life',
          '- `doc:guide` — Practice instructions (solo or group)',
          '- `doc:script` — Performable text (rituals/guided audio/podcast episodes)',
          '- `doc:reference` — FAQ, indices, “how to read the canon”',
          '',
          'Optional refiners (tags):',
          '- `lexicon:definition`, `lexicon:role`, `lexicon:archetype`, `lexicon:demonym`',
          '- `script:ritual`, `script:guided_practice`, `script:podcast_episode`',
          '- `cue:audio`, `cue:music`, `cue:sfx`, `media:audio`, `media:podcast`',
          '',
          '---',
          '',
          '## 6) Audience tags',
          '',
          'Choose one:',
          '- `audience:public` (default)',
          '- `audience:participant`',
          '- `audience:facilitator`',
          '- `audience:steward`',
          '',
          'Anti-capture rule: Audience targeting must not become rank. There are no “inner teachings” that confer status.',
          '',
          '---',
          '',
          '## 7) Power surfaces and hazard tags (safety trailheads)',
          '',
          'If a work touches money, authority, identity, privacy, secrecy, coercion, or relationship control:',
          '- add `power_surface`',
          '- add relevant `hazard:*` tags',
          '',
          'Use hazards:',
          '- `hazard:money`, `hazard:authority`, `hazard:identity`, `hazard:privacy`, `hazard:secrecy`, `hazard:coercion`, `hazard:relationships`',
          '',
          'Risk trailhead requirement (lightweight):',
          'If something is `power_surface`, it must have a `notes[]` entry with `context: "risk_assessment"` describing hazards + mitigations, and mitigations should reference IDs of rules/practices/texts.',
          '',
          '---',
          '',
          '## 8) Cross-linking expectations (so the canon stays a DAG, not a pile)',
          '',
          '- Every `claim` should cite ≥1 `sourceTextId`',
          '- Every `rule` should cite ≥1 `supportingTextId`',
          '- Every `practice` should cite ≥1 `instructionsTextId` (or a clear alternative)',
          '- Every `doc:script` should link back to the canon it delivers (not replace it)',
          '',
          '---',
          '',
          '## 9) Canon precedence (what wins in a conflict)',
          '',
          'If two things conflict, default precedence is:',
          '1) `doc:stewardship` safeguards and non-coercion constraints',
          '2) `doc:charter` purpose/scope constraints',
          '3) `rules` and `claims` (as indexes of canon)',
          '4) `doc:guide` practices and `events`',
          '5) `doc:teaching` interpretation',
          '6) `doc:lexicon` definitions (unless amended by charter/safeguards)',
          '7) `doc:myth` (always subordinate to safeguards and consent)',
          '8) `doc:script` delivery artifacts (subordinate to underlying canon)',
          '',
          'Meta-rule: Consent, dignity, and exit rights beat everything.',
          '',
          '---',
          '',
          '## 10) Extending this taxonomy',
          '',
          'This taxonomy is allowed to evolve, but not to sprawl:',
          '- prefer a refiner tag (e.g., `lexicon:archetype`) over a new `doc:*`',
          '- if you must add a new `doc:*`, update this document first',
          '- avoid synonyms (pick one tag and stick)',
          ''
        ].join('\n')
      }
    ]
  };

  // Export for Node (tests / loader)
  if (typeof module !== 'undefined' && module.exports) {
    module.exports = dataset;
  }

  // Register for browser (manifest loader)
  if (typeof window !== 'undefined') {
    window.movementDatasets = Array.isArray(window.movementDatasets)
      ? window.movementDatasets
      : [];
    window.movementDatasets.push(dataset);
  }
})();
